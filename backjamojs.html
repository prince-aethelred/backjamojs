<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hangul Combination</title>
    <script>
        const choseong = [
            'ㄱ', 'ㄲ', 'ㄴ', 'ㄷ', 'ㄸ', 'ㄹ', 'ㅁ', 'ㅂ', 'ㅃ', 'ㅅ', 'ㅆ', 'ㅇ', 'ㅈ', 'ㅉ', 'ㅊ', 'ㅋ', 'ㅌ', 'ㅍ', 'ㅎ'
        ];

        const jungseong = [
            'ㅏ', 'ㅐ', 'ㅑ', 'ㅒ', 'ㅓ', 'ㅔ', 'ㅕ', 'ㅖ', 'ㅗ', 'ㅘ', 'ㅙ', 'ㅚ', 'ㅛ', 'ㅜ', 'ㅝ', 'ㅞ', 'ㅟ', 'ㅠ', 'ㅡ', 'ㅢ', 'ㅣ'
        ];

        const jongseong = [
            '', 'ㄱ', 'ㄲ', 'ㄳ', 'ㄴ', 'ㄵ', 'ㄶ', 'ㄷ', 'ㄹ', 'ㄺ', 'ㄻ', 'ㄼ', 'ㄽ', 'ㄾ', 'ㄿ', 'ㅀ', 'ㅁ', 'ㅂ', 'ㅄ', 'ㅅ', 'ㅆ', 'ㅇ', 'ㅈ', 'ㅊ', 'ㅋ', 'ㅌ', 'ㅍ', 'ㅎ'
        ];

        function combineCharacters() {
            const textbox = document.getElementById('input');
            let input_text = textbox.value;
            let i = 0;
            const end = input_text.length - 1;

            for (i = 0; i < end; i++) {
                const first = input_text[i];
                const second = input_text[i + 1];

                if (choseong.includes(first) && jungseong.includes(second)) {
                    input_text = input_text.slice(0, i) + String.fromCharCode(0xAC00 + choseong.indexOf(first) * 588 + jungseong.indexOf(second) * 28) + input_text.slice(i + 2);
                }

                else if (jongseong.includes(second) && 0xAC00 <= first.charCodeAt(0) && first.charCodeAt(0) <= 0xD7A3) {
                    const index = first.charCodeAt(0) - 0xAC00;
                    const newJongseong = jongseong.indexOf(second);
                    if (newJongseong > 0) {
                        input_text = input_text.slice(0, i) + String.fromCharCode(0xAC00 + index + newJongseong) + input_text.slice(i + 2);
                    }
                }
            }

            textbox.value = input_text;
        }

        window.onload = function () {
            document.getElementById('input').addEventListener('input', combineCharacters);
        };
    </script>
</head>

<body>
    <h1>Hangul CombinationVer0.0.3</h1>
    <input type="text" id="input" style="width: 100%;">
</body>

</html>